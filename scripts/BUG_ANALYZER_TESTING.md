# üêõ Bug Analyzer Testing Guide

This guide explains how to test the CodeBugAnalyzer ‚Üí Jira ticket flow with full visibility into the pipeline.

## Quick Start

1. **Insert test bug messages:**
   ```bash
   python scripts/insert_bug_test_messages.py
   ```
   This creates 7 diverse bug scenarios in your database.

2. **Start Streamlit:**
   ```bash
   streamlit run streamlit_dashboard.py
   ```

3. **View messages:**
   - Open http://localhost:8501
   - Filter by channel: `engineering-alerts` or `engineering` to see bug messages
   - Click **"üîç Analyze Bug"** on any message

## What You'll See

The bug analysis shows the **full pipeline**:

### 1Ô∏è‚É£ Ticket Type Detection
- Shows if message is classified as a bug
- Displays detection reason

### 2Ô∏è‚É£ Extracted Patterns
- **Exceptions**: Python exception types found
- **Status Codes**: HTTP error codes (e.g., 429, 500)
- **Files**: Code files mentioned
- **Error Description**: LLM-generated description
- **Likely Cause**: LLM-inferred root cause

### 3Ô∏è‚É£ Codebase Matches
- Files found in your codebase
- Line numbers and code snippets
- Shows what code is relevant to the bug

### 4Ô∏è‚É£ Institutional Memory Matches
- Past issues that match this bug
- Relevance scores
- Previous solutions that worked

### 5Ô∏è‚É£ Recommended Debugging Steps
- Actionable steps generated by LLM
- Based on patterns, codebase, and memory matches

### 6Ô∏è‚É£ Summary
- Concise summary of the analysis

### 7Ô∏è‚É£ Jira Ticket Preview
- Shows the formatted ADF (Atlassian Document Format) that would be sent to Jira
- Includes all sections: detected issues, codebase matches, memory matches, debugging steps

## Test Scenarios Included

1. **429 Rate Limiting** - Should match institutional memory
2. **Database IntegrityError** - Should find codebase match in cache_service.py
3. **Notion Format Error** - Should match institutional memory + find notion_service.py
4. **API 500 Error** - Should find routes.py in codebase
5. **Jira ADF Error** - Should match institutional memory + find jira_service.py
6. **OpenAI Context Window** - Should match institutional memory + find prioritizer.py
7. **Jira 400 Error** - Generic error, should still find relevant matches

## API Endpoint

You can also test via API:

```bash
curl http://localhost:8000/api/slack/integrations/bug-analysis/{message_id}
```

Returns full analysis including Jira preview.

## What to Look For

**Good signs:**
- ‚úÖ Patterns extracted correctly (exceptions, status codes, files)
- ‚úÖ Codebase matches found for mentioned files
- ‚úÖ Institutional memory matches for known issues
- ‚úÖ Debugging steps are specific and actionable
- ‚úÖ Jira preview is well-formatted

**Issues to optimize:**
- ‚ö†Ô∏è No codebase matches when files are mentioned
- ‚ö†Ô∏è No memory matches for known issues
- ‚ö†Ô∏è Generic debugging steps
- ‚ö†Ô∏è Missing context in Jira preview

## Next Steps

After testing, you can:
1. Create actual Jira tickets from Streamlit
2. Review the Jira preview to see formatting quality
3. Optimize pattern extraction if needed
4. Add more institutional memory entries for common bugs


